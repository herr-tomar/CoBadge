package osplus.pkp.dto.model;

import java.util.ArrayList;
import java.util.List;

public class ProtoMessageModel {

    private String name;
    private String packageName;
    private String className;
    private List<ProtoFieldModel> fields = new ArrayList<>();

    public ProtoMessageModel(String name) {
        this.name = name;
        this.className = name;
    }

    public void addField(ProtoFieldModel field) {
        this.fields.add(field);
    }

    public List<ProtoFieldModel> getFields() {
        return fields;
    }

    public String getName() {
        return name;
    }

    public String getClassName() {
        return className;
    }

    public String getPackageName() {
        return packageName;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setPackageName(String packageName) {
        this.packageName = packageName;
    }

    public void setClassName(String className) {
        this.className = className;
    }

    // Calculates REST package name by inserting "rest" after the base package
    public String getRestPackageName() {
        if (packageName == null || packageName.isBlank()) {
            return "rest";
        }
        String[] parts = packageName.split("\\.", 3);
        if (parts.length >= 2) {
            return parts[0] + "." + parts[1] + ".rest." + (parts.length == 3 ? parts[2] : "");
        }
        return "rest." + packageName;
    }

    // Calculates mapper package name under .rest.mapper
    public String getMapperPackageName() {
        return getRestPackageName() + ".mapper";
    }
}
