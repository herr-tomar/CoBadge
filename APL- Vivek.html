@Component
public class FlowHandlerInitializer {

    private final List<FlowConfig> configs;
    private final Map<String, FlowHandler> flowHandlers;
    private final FlowHandlerRegistry<String, FlowHandler> registry;

    public FlowHandlerInitializer(
            List<FlowConfig> configs,
            Map<String, FlowHandler> flowHandlers,
            FlowHandlerRegistry<String, FlowHandler> registry) {
        this.configs = configs;
        this.flowHandlers = flowHandlers;
        this.registry = registry;
    }

    @PostConstruct
    public void registerHandlers() {
        for (FlowConfig config : configs) {
            FlowHandler handler = flowHandlers.get(config.name());
            if (handler == null) {
                throw new IllegalArgumentException("‚ùå No FlowHandler registered for flow: " + config.name());
            }
            registry.register(config.name(), handler);
        }
    }
}
