package osplus.pkptuna.flows.bootstrap;

import jakarta.annotation.PostConstruct;
import org.springframework.context.annotation.Configuration;
import osplus.pkptuna.hazelcast.pubsub.GenericHazelcastConsumer;
import osplus.pkptuna.hazelcast.pubsub.GenericHazelcastRouter;

@Configuration
public class HazelcastFlowBootstrap {

    private final GenericHazelcastRouter router;
    private final GenericHazelcastConsumer consumer;

    public HazelcastFlowBootstrap(GenericHazelcastRouter router,
                                   GenericHazelcastConsumer consumer) {
        this.router = router;
        this.consumer = consumer;
    }

    @PostConstruct
    public void startFlowInfra() {
        router.initRouters();
        consumer.startPolling();
    }
}
