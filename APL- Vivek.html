@Bean
public FlowHandlerRegistry<String, FlowHandler> flowHandlerRegistry(
        List<FlowConfig> configs,
        Map<String, FlowHandler> flowHandlers) {

    FlowHandlerRegistry<String, FlowHandler> registry = new FlowHandlerRegistry<>();

    for (FlowConfig config : configs) {
        String name = config.name();
        FlowHandler handler = flowHandlers.get(name);
        if (handler == null) {
            throw new IllegalArgumentException("No FlowHandler registered for flow: " + name);
        }
        registry.register(name, handler);
    }

    return registry;
}
