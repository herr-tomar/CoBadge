private String packageName;

public String getPackageName() {
    return packageName;
}

public void setPackageName(String packageName) {
    this.packageName = packageName;
}

-----

public static List<ProtoMessageModel> parse(File protoFile) {
    List<ProtoMessageModel> messageModels = new ArrayList<>();

    try (BufferedReader reader = new BufferedReader(new FileReader(protoFile))) {
        String line;
        String packageName = null;
        ProtoMessageModel currentMessage = null;

        while ((line = reader.readLine()) != null) {
            line = line.trim();

            // Extract package name
            if (line.startsWith("package ")) {
                String[] parts = line.split("\\s+");
                if (parts.length >= 2) {
                    packageName = parts[1].replace(";", "").trim();
                }
                continue;
            }

            // Start of message
            if (line.startsWith("message ")) {
                String messageName = line.split("\\s+")[1].replace("{", "").trim();
                currentMessage = new ProtoMessageModel(messageName);
                currentMessage.setPackageName(packageName);  // Set package name
                continue;
            }

            // End of message
            if (line.startsWith("}")) {
                if (currentMessage != null) {
                    messageModels.add(currentMessage);
                    currentMessage = null;
                }
                continue;
            }

            // Fields inside a message
            if (currentMessage != null && !line.isEmpty() && line.contains(";")) {
                String[] parts = line.split("\\s+");
                if (parts.length >= 3) {
                    String type = parts[0];
                    String name = parts[1].replace(";", "");
                    currentMessage.addField(new ProtoFieldModel(type, name));
                }
            }
        }

    } catch (Exception e) {
        System.err.println("Failed to parse proto file: " + protoFile.getName());
        e.printStackTrace();
    }

    return messageModels;
}

----------

<#if packageName??>
package ${packageName};
</#if>
