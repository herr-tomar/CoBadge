package osplus.pkptuna.flows;

import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import osplus.pkptuna.flows.bootstrap.FlowHandlerInitializer;
import osplus.pkptuna.flows.bootstrap.HazelcastFlowBootstrap;
import osplus.pkptuna.flows.bootstrap.HazelcastFlowConfigs;
import osplus.pkptuna.hazelcast.pubsub.GenericHazelcastConsumer;
import osplus.pkptuna.hazelcast.pubsub.GenericHazelcastRouter;

@Configuration
@EnableConfigurationProperties(HazelcastFlowConfigs.class)
public class FlowsModuleConfiguration {

    @Bean
    public FlowHandlerInitializer flowHandlerInitializer() {
        return new FlowHandlerInitializer();
    }

    @Bean
    public HazelcastFlowBootstrap hazelcastFlowBootstrap(GenericHazelcastRouter router,
                                                         GenericHazelcastConsumer consumer) {
        return new HazelcastFlowBootstrap(router, consumer);
    }
}
