package osplus.pkp.dto.model;

public class ProtoFieldModel {

    private final String protoType;
    private final String name;
    private final boolean repeated;

    public ProtoFieldModel(String protoType, String name, boolean repeated) {
        this.protoType = protoType;
        this.name = name;
        this.repeated = repeated;
    }

    public String getProtoType() {
        return protoType;
    }

    public String getName() {
        return name;
    }

    public boolean isRepeated() {
        return repeated;
    }

    public String getJavaType() {
        String javaType = switch (protoType) {
            case "string" -> "String";
            case "bool" -> "Boolean";
            case "int32", "sint32", "uint32", "fixed32" -> "Integer";
            case "int64", "sint64", "uint64", "fixed64" -> "Long";
            case "float" -> "Float";
            case "double" -> "Double";
            case "bytes" -> "byte[]";
            case "google.protobuf.Timestamp" -> "java.time.Instant";
            default -> protoType.endsWith("Dto") ? protoType : "Object";
        };

        return repeated ? "List<" + javaType + ">" : javaType;
    }

    public boolean isCustomType() {
        return !protoType.matches("string|bool|int32|sint32|uint32|fixed32|int64|sint64|uint64|fixed64|float|double|bytes|google.protobuf.Timestamp");
    }
}
