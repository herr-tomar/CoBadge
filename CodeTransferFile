package osplus.pkptuna.dispute.service.impl;

import org.apache.http.HttpHeaders;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.reactive.function.client.WebClient;
import osplus.pkptuna.dispute.config.DisputeServiceProperties;
import osplus.pkptuna.rest.dispute.model.mapper.DisputeCreateRequestIboDtoMapper;

@Configuration
@EnableConfigurationProperties(DisputeServiceProperties.class)
public class ProjecteigeneTestConfiguration {
    
    
    public ProjecteigeneTestConfiguration () {
        
    }
    
    @Bean
    public WebClient webClient(@Value("${dispute.base-url}") String baseUrl) {
        return WebClient.builder()
                .baseUrl(baseUrl)
                .defaultHeader(HttpHeaders.CONTENT_TYPE, "application/json")
                .build();
    }

    @Bean
    public DisputeDetailServiceImpl disputeDetailService(WebClient webClient, DisputeServiceProperties props) {
        return new DisputeDetailServiceImpl(webClient, props);
    }

    @Bean
    public DisputeServiceImpl disputeService(WebClient webClient, DisputeServiceProperties props, DisputeCreateRequestIboDtoMapper disputeCreateRequestIboDtoMapper) {
        return new DisputeServiceImpl(webClient, props, disputeCreateRequestIboDtoMapper);
    }
}
