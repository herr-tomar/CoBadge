@Test
void shouldHandleRequestAndCallService() {
    DisputeDetailRequestDto payload = DisputeDetailRequestDto.newBuilder()
            .setIssuerId("issuer")
            .setDisputeFolderReference("ref")
            .build();

    DisputeDetailRequestWrapperDto request = DisputeDetailRequestWrapperDto.newBuilder()
            .setPayload(payload)
            .build();

    DisputeResponseDto expectedResponse = DisputeResponseDto.newBuilder().build();

    // Relax the third argument to match whatever list the handler passes
    when(disputeDetailService.getDisputeFolderDetails(eq("issuer"), eq("ref"), anyList()))
            .thenReturn(expectedResponse);

    DisputeResponseDto response = handler.handleRequest(request);

    assertEquals(expectedResponse, response);
    // Optional: verify the service was called as expected
    // verify(disputeDetailService).getDisputeFolderDetails(eq("issuer"), eq("ref"), anyList());
}
