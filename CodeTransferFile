import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.doNothing;
import static org.mockito.Mockito.when;
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.ArgumentMatchers.anyString;



import osplus.apl.core.api.administration.metrics.MetricsService;
import osplus.apl.core.api.administration.metrics.MetricTag;

import java.util.function.Function;
import java.util.function.Supplier;
import java.util.function.Consumer;



@Bean
public MetricsService metricsService() {
    MetricsService mock = mock(MetricsService.class);
    doNothing().when(mock).increaseCounter(any(), any());
    when(mock.timer(any(), any(), any(), any())).thenAnswer(invocation -> {
        Function<Object, Object> fn = invocation.getArgument(0);
        Object param = invocation.getArgument(1);
        return fn.apply(param);
    });
    return mock;
}
