/** 
 * Calculate auto refund indicator (CHG_autoErstattungKz).
 * - "N" = No refund
 * - "Y" = Full refund
 * - "P" = Partial refund
 */
public static String calcAutoErstattungKz(String autoErstattungKz, String reklaTeilbetragKz) {
    if (autoErstattungKz == null) return "N";

    if (autoErstattungKz.trim().equalsIgnoreCase("J")) {
        if (reklaTeilbetragKz != null && reklaTeilbetragKz.trim().equalsIgnoreCase("J")) {
            return "P";
        } else {
            return "Y";
        }
    }
    return "N";
}

----

@Mapping(target = "autoErstattungKz",
         expression = "java(DisputeBusinessLogic.calcAutoErstattungKz(src.getAutoErstattungKz(), src.getReklaTeilbetragKz()))")
