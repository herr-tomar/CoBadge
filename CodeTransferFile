syntax = "proto3";

package osplus.pkptuna.dispute.create.model;

import "google/protobuf/timestamp.proto";

option java_package = "osplus.pkptuna.dispute.create.model";
option java_outer_classname = "DisputeCreateProto";
option java_multiple_files = true;

/* =========================
   Request (as sent to API)
   ========================= */
message DisputeCreateRequestDto {
  string disputeReason = 1;
  string refundRedebitIndicator = 2;
  AmountDto refundRedebitAmount = 3;
  bool declareFraudIndicator = 4;
  string issuerDisputeExternalReference = 5;

  repeated DisputePostingRequestDto disputePostings = 6;
  repeated DisputeEventRequestDto disputeEvents = 7;
  repeated DisputeDocumentRequestDto disputeDocuments = 8;
}

message AmountDto {
  int64 value = 1;     // use int64 for monetary values
  int32 exponent = 2;
  string isoCode = 3;
}

message DisputePostingRequestDto {
  AmountDto postingAmount = 1;
  string message = 2;
  bool immediateReimbursement = 3;
  string postingTypeReference = 4;
}

message DisputeEventRequestDto {
  string type = 1;
  string message = 2;
}

message DisputeDocumentRequestDto {
  string data = 1;           // keep string per your sample; switch to bytes if Base64 wanted
  string type = 2;
  string label = 3;
  string fileName = 4;
  string documentTypeId = 5;
}

/* =========================
   Response (as returned)
   ========================= */
message DisputeCreateResponseDto {
  ResponseMetadataDto responseMetadata = 1;
  DisputeCreateDataDto data = 2;
}

message ResponseMetadataDto {
  string correlationId = 1;
  LinksDto links = 2;
  string statusMessage = 3;
  int32 statusCode = 4;
  // Keep as string to preserve "yyyy-MM-dd'T'HH:mm:ss.SSSZ"
  string responseDateTime = 5;
  int64 timeTakenMs = 6;
}

message LinksDto {
  string self = 1;
  string next = 2;
}

message DisputeCreateDataDto {
  DisputeFolderIdentifierDto disputeFolderIdentifier = 1;
  repeated DisputePostingResponseDto disputePostings = 2;
  repeated DisputeEventResponseDto disputeEvents = 3;
  repeated DisputeDocumentResponseDto disputeDocuments = 4;
}

message DisputeFolderIdentifierDto {
  string disputeFolderReference = 1;
  string issuerDisputeExternalReference = 2;
}

message DisputePostingResponseDto {
  AmountDto postingAmount = 1;
  string postingTypeReference = 2;
  google.protobuf.Timestamp creationDate = 3; // e.g., "2025-07-23T12:50:48Z"
}

message DisputeEventResponseDto {
  string type = 1;
  google.protobuf.Timestamp creationDate = 2;
}

message DisputeDocumentResponseDto {
  string fileName = 1;
  google.protobuf.Timestamp creationDate = 2;
  string documentTypeId = 3;
}
